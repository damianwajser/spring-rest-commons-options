sudo: false
language: java
cache:
  directories:
  - "$HOME/.cache"
  
addons:
  sonarcloud:
    organization: damianwajser # the key of the org you chose at step #3
    token:
      secure: 264c9a60f4ea64c54863f4df372ca741ede516dc # encrypted value of your token
      branches:
        - master
script:
  # other script steps might be done before running the actual analysis
  - sonar-scanner

deploy:
    skip_cleanup: true
    on:
      repo: damianwajser/spring-rest-commons-options
      tags: true
      jdk: oraclejdk8
      branch: master
after-success:
  script:
    # the following command line builds the project, runs the tests with coverage and then execute the SonarCloud analysis
    - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar
    
notifications:
  email:
    - wajser@gmail.com
